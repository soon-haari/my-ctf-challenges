st1 = (0, 2422468165, 1362567910, 945948901, 1042565707, 2033537337, 130140896, 1827926091, 2034467606, 3125017010, 4027804821, 3600948414, 3161117388, 3268114544, 3722611654, 1902771235, 1699075168, 2639599505, 2334330400, 603038357, 4237675952, 1785139364, 1444983270, 3183218936, 662308028, 2517887343, 316801799, 2121832606, 2719523538, 2028035722, 107467324, 3180074330, 3767572280, 3953569728, 3905342048, 1514515523, 1432821444, 3447998952, 3445498753, 958632465, 3503252087, 1303083490, 4267020921, 489720828, 2702752664, 3159385126, 3279238403, 3031530586, 4085390916, 3932353251, 1190445378, 900770580, 4281689722, 207879353, 1274999754, 4265641350, 2815647009, 4076949674, 2104707089, 1775736650, 49656464, 4040966445, 56963373, 4252078628, 1542556959, 2748029976, 1773573797, 76281563, 1867551597, 3305018941, 1281923065, 1046772315, 4242993132, 985578105, 2855582946, 1416667517, 2188191614, 1215894074, 3590297463, 3882022214, 2329206741, 3674877325, 2966044090, 2281047435, 4258575100, 3791168910, 2422326204, 579530968, 1046897807, 2459676715, 1659296556, 2375537832, 1783408285, 997458151, 1132690724, 1246381933, 3742200562, 456506119, 1460721683, 2469899500, 3744630093, 3938444828, 746769498, 898504207, 1492620317, 1717688679, 1406388289, 674669515, 217833358, 3733305506, 758004265, 3587764813, 2455599601, 1132207857, 1142372668, 1115952245, 2810212500, 2014691025, 2929059335, 129628886, 59660874, 3616818989, 2944708767, 2119381110, 2138546705, 2204410649, 2056829027, 2573303565, 3361421343, 3085454323, 2169806333, 861522438, 2245537742, 3050159135, 232826454, 1287813247, 3575265654, 1003862849, 1924952470, 2671611765, 3370671200, 484599080, 1327889805, 1215853903, 844640090, 2120185880, 1794602018, 1398925711, 3260916592, 3448142359, 2883437864, 2822184044, 953336971, 2840835427, 3782554526, 89091499, 3138110529, 3849296143, 1395041730, 4117945813, 1547380776, 4185123782, 3554357355, 30719829, 1202876674, 1609592140, 3565689083, 2533351792, 1860224202, 439179041, 1843454905, 2570121477, 2742649605, 4083830356, 2313395803, 387492707, 368211243, 3782505424, 3714053217, 1139393010, 1455209561, 987361351, 1767860576, 95347251, 1706549285, 2596062549, 64756492, 847884615, 2229681278, 3957713653, 1953937924, 3815888737, 275411250, 1572729058, 2121325001, 3251407139, 2927110349, 2763408935, 3308491987, 2658360743, 833739380, 3820663714, 2329324923, 240303256, 3716562005, 286621503, 2751869088, 3705330137, 2044403204, 756351015, 3094393234, 855973748, 2516781600, 3663010074, 3044716747, 1565176533, 3556037478, 1695678400, 1214708921, 1617214992, 2608487497, 2574215991, 532738089, 2700902649, 865662391, 807774785, 3609103739, 4106238526, 4256956676, 2532364472, 229257823, 3920534239, 215594774, 4081702638, 229742615, 3126250929, 644611638, 2407737279, 1948280091, 3053411470, 3929181566, 3570126991, 2927575057, 664328274, 1726641413, 3977475695, 2259602552, 1004628373, 3381489061, 985088263, 3756481004, 675837587, 1930752206, 2033584537, 1008726000, 1437245387, 2734763967, 3190416764, 3739210799, 2691132127, 3859660814, 1827517374, 493163194, 2828165576, 2196510588, 3470847309, 1737521149, 1072658011, 564144346, 1077258349, 30336526, 2154144805, 1472908031, 1370683164, 4102265041, 1455794976, 451608524, 2633754228, 755162075, 728199554, 502550313, 1914314302, 2610112741, 4024814064, 3497904910, 4062697774, 1219769879, 732115777, 3486813717, 195545320, 2055384911, 388478199, 1992078518, 1912856998, 2708222650, 2518319926, 2253516255, 125630076, 3403660946, 2595658659, 3076548421, 3265991756, 217821096, 2909795698, 2545740115, 2548421849, 3547708319, 2989460355, 941648561, 1886094497, 3860184826, 1874668978, 224900584, 2088642592, 3505534547, 4038728711, 2522458566, 1875969474, 3974088706, 2277331136, 2639208983, 3385849375, 2004614657, 2360259197, 2796686095, 480232471, 3663658947, 3920343705, 841761512, 16592137, 1457703571, 482664515, 3174828802, 1778321323, 1476236298, 3451532209, 1010019335, 3244619326, 479247539, 1744336581, 2929498682, 778397214, 805795558, 4186846966, 331014157, 267619409, 2112156714, 2017894947, 4154175179, 447287279, 1690971016, 2690207852, 2186332441, 1324324231, 3476024256, 836430322, 4282799024, 1559982654, 3395702658, 237000326, 13738051, 3025802949, 3368768709, 792744490, 2857365121, 973438878, 2694849266, 3712225731, 2567343483, 342348840, 1821798508, 1706483465, 1064880042, 1771859369, 2426855966, 2160076793, 81297147, 542421450, 2678332549, 2692761487, 2767721842, 3642494821, 1973767091, 615138352, 998903343, 518758636, 2101877025, 3117635556, 3054313815, 2239001605, 3700147708, 4132736661, 203527599, 3683128620, 498557042, 2414123359, 1195439835, 2818223169, 2080125350, 716898061, 3094860978, 2394918496, 880922751, 3865983895, 2822387727, 886808570, 3993718048, 3259473356, 3946472866, 690374004, 2926706355, 418689985, 2073944096, 623870201, 2513733225, 2239246846, 886634794, 4037884480, 3715918101, 3905247684, 1399329893, 1890199525, 769828877, 497169055, 3348290680, 2946014980, 2894805517, 3470304209, 2387920806, 1430559861, 3376661231, 2852634946, 88196518, 3419525522, 2093835320, 783937076, 1939372086, 4067175977, 1656683706, 2556347936, 3271059222, 1124660078, 2066269648, 1081649316, 1729289978, 1469473869, 1494671420, 1878751036, 1988558268, 993345493, 797913326, 1250935280, 4166742055, 66070283, 2322784526, 3249858064, 289267740, 3118908835, 997682321, 48402266, 1486949056, 3679153950, 2660105468, 2584742119, 3420342569, 1391804641, 3817588545, 1885727945, 3140307413, 3725584648, 2268195478, 827229636, 893515995, 521300943, 1133587310, 1187995880, 3809703986, 934741068, 2892593093, 1406973957, 1707798559, 2139999582, 4133066126, 2250251650, 197197561, 498568058, 4122614266, 4171124125, 3291373105, 1838215076, 3057832568, 3818045705, 1531131228, 2498650894, 758982150, 1062752378, 581285170, 1533540621, 2748084267, 3384210386, 1945221969, 2177708551, 946709914, 3489505169, 1630857500, 1462451248, 2205680949, 2673499928, 4243145796, 1574773227, 2819397871, 3123010153, 1443205771, 634113560, 3517984804, 1381585113, 2929409481, 3110739875, 1243368622, 1169682793, 1619102065, 3799987088, 3119019084, 2360132011, 778437406, 725119619, 890152058, 6772594, 1497428758, 1012997729, 3137298438, 83725052, 79840613, 7571159, 3115165045, 3248029675, 2125615901, 1004360074, 1570367518, 3836692534, 3745428116, 1410442570, 2630733644, 1044052941, 2952775806, 3672788193, 1103298293, 4037557758, 3581990928, 2488193636, 653042739, 2580205218, 77084826, 1288273450, 2702011377, 100098685, 2324863097, 3821613628, 3114518758, 3412876145, 2190333993, 1125376054, 318569856, 2950861812, 1625699595, 3197075020, 63153313, 3980129500, 550885692, 2522212415, 602158710, 1754268760, 278452226, 1242269867, 382215696, 2897820930, 1968315499, 2796984493, 1315265577, 1524475593, 245754462, 3724095073, 403865234, 3365673169, 3921098653, 993741768, 3434625188, 2899620727, 968046854, 2307229774, 841776031, 2044655462, 3480839451, 1388396864, 1407638222, 1179646560, 2614087215, 4129235087, 1302961214, 2930702231, 3858693064, 1715357285, 3852876566, 379100790, 2130579318, 2535010140, 626723313, 331282015, 3039337898, 1684687012, 1642651226, 406267907, 2940985991, 1972062659, 3163559860, 626801592, 4235329763, 207102331, 1381197715, 864279788, 3435897408, 2713475344, 4088666767, 2139012997)
# 500 inverse state of 0x80000000
st2 = (0, 398203861, 3302787992, 3783795604, 3397404819, 1691698404, 2903919167, 2178850963, 3842903128, 3208397833, 377360533, 3198857606, 664332785, 1562264321, 2713292249, 4155937075, 353849728, 292986170, 3366910974, 3185044459, 2758054913, 462234415, 3632449432, 2463269022, 501748464, 1013802690, 4187581859, 4192363128, 3729861001, 1669691944, 2577352944, 2684614569, 3564240417, 4171832769, 1965591361, 1527238835, 1737300655, 1612875105, 3512356218, 1453271547, 353250077, 2226947639, 494176922, 4106366960, 3762302238, 661795417, 3925219186, 2230735785, 2554059729, 2142792013, 2614297864, 3839086063, 418863766, 60724059, 2649403031, 2636174694, 3380532805, 2587287657, 3353100795, 660495656, 3116870655, 659802058, 3213206795, 603318865, 4022744188, 3642610337, 651844244, 2688465619, 257109003, 1170864693, 2980208612, 3414198483, 2545515726, 3942312420, 2128695625, 1371702772, 1602699065, 334834007, 2177761053, 2041124454, 2103500181, 2282386762, 654980502, 3387667693, 2707515697, 1673549126, 2779106702, 2318123872, 2040107580, 2623365741, 194735280, 3765235809, 2838665844, 1606509091, 1008506159, 456686603, 404162742, 1590136227, 1547919436, 451744113, 2868492277, 3470613262, 2987077992, 1680423299, 3520016843, 731251747, 3478069508, 551194412, 33431431, 2654216694, 111773979, 859900490, 524698885, 1071716987, 575505743, 2316325332, 3358744721, 3763796804, 1584749410, 518515544, 1009256599, 3128156106, 3894501565, 3411910759, 2111735876, 3684773541, 1784865164, 867589877, 3310232322, 998501554, 3782259850, 1298606104, 4081220678, 856961794, 93583591, 18382915, 2957649574, 3712453819, 1257358936, 717594389, 1199813374, 1100543263, 243701643, 2715931964, 4218543319, 3412885983, 432845111, 2140587907, 1598369537, 3527093026, 3411400670, 3305026254, 3813347884, 4085086029, 1643515142, 2503849644, 3122443205, 1133364989, 4270585527, 66639253, 3271409951, 872156633, 726532818, 893623531, 752395703, 1305531535, 906141842, 2378966785, 998445864, 3668196667, 931368676, 2162231146, 3688214229, 697039406, 1135393298, 1549970828, 3856184595, 1407348097, 592212805, 1035363959, 3673354596, 3648430243, 628991360, 2762664307, 383746196, 248632874, 2406509616, 1244054812, 3316339513, 4188277013, 3821767087, 1776656122, 1941480823, 3303449143, 1272055451, 3809535986, 3720503370, 1156233821, 1894551602, 2649732578, 4107667567, 1791495670, 1333294738, 190551007, 305803818, 3293969660, 1177247809, 2774058405, 3882645520, 3025404060, 2246051126, 1276411344, 239045185, 2373363478, 64578029, 1195092715, 2581655385, 643210943, 2475332443, 26409024, 164344410, 27226018, 4278436004, 3889217690, 3462649564, 1921501371, 2320078637, 2234731065, 315803502, 1071743390, 2226759875, 1117300738, 2172108263, 688232646, 3066454108, 2373580218, 430962904, 3896458301, 3498153068, 2177814777, 2130286393, 3071115586, 3722429242, 2893152503, 2847454635, 1349458626, 4271501982, 1570031595, 3256317418, 1489790371, 2613028046, 2469444595, 4265779847, 3839370852, 1114562175, 3601497900, 3894836610, 781465393, 2673710018, 3618507197, 3456410361, 867618552, 4120136424, 1181434974, 1568931633, 3987740661, 2655117300, 4290632044, 881967831, 14066100, 121346104, 1470444117, 1832536643, 4107976143, 71156101, 1528212608, 1806434096, 2546817710, 3020648300, 765314568, 3317718299, 1214806264, 3095331157, 1772389633, 2546241273, 514639481, 2731595868, 480095419, 1534130986, 2626568735, 1779088700, 4002394723, 3907236711, 3356460696, 1636960662, 1011404710, 2103800834, 803387471, 1331444022, 2398662130, 196231125, 1854837326, 3018768032, 1369249462, 986801714, 161804709, 2851351810, 2895965554, 3532704635, 4089410363, 3462748457, 1056224968, 2274342431, 1139392831, 2516286349, 650818402, 2404713945, 2371188407, 1465770870, 2060943486, 588196509, 4044126909, 1576007684, 3600288394, 2129325890, 1080979939, 3209190861, 3263957274, 1219562400, 837146011, 1535846988, 4078141708, 2730725065, 367886099, 1843868055, 3536457146, 1121964451, 1638996870, 3226702707, 2682379028, 3729828758, 3113588856, 4060920359, 35264678, 1324056628, 2380222715, 3313676567, 3540773171, 978090066, 3635764739, 2468916768, 1699185358, 1601210021, 162477987, 3634195582, 4118464119, 724233217, 1107077447, 1304165750, 948001304, 2202435852, 123468245, 3339685994, 3170977960, 3441260922, 3893755512, 1421027593, 288523378, 3733138, 3817746719, 2152243215, 2530966564, 3488775959, 644986532, 649677574, 1730305178, 2472672236, 22202152, 2595402090, 3861110082, 1171519241, 2990776149, 3600101068, 2460553408, 1848129724, 3384795663, 4112540804, 2205129966, 1008092706, 1138914005, 2753344817, 1030813994, 43464451, 167942094, 1994228168, 1772210109, 2634275692, 3386446789, 4025534104, 2867592244, 100503990, 3739024126, 3759546435, 4254739746, 3301581634, 3783204439, 1847498305, 3744323057, 3368769014, 2761496016, 1575303602, 3519262395, 4000809088, 347997156, 863034074, 4056024198, 3782378775, 344411073, 2747401877, 1965475281, 4289802283, 3265830804, 931831860, 1150921667, 4201231006, 3661676398, 1679772405, 1598049338, 1868610649, 1728254059, 3241003202, 1279116918, 655783719, 4185187465, 4080373984, 2297878895, 4235231591, 2676169317, 184283880, 927513153, 1574059673, 3190991879, 1588754175, 3019096879, 777656919, 1816719499, 3595231567, 2382150991, 3659265776, 3973381972, 204317191, 2553177727, 89064418, 264281132, 2146969337, 1659984702, 3304554608, 2209994226, 1843245636, 966483159, 1351961279, 152010502, 504705166, 1047757149, 2034927205, 4190396987, 3625762757, 3247944484, 981894549, 471689054, 4175784230, 3308918544, 1426580332, 1314442883, 1012255751, 2838290975, 3899597750, 3738964272, 1737915861, 4251156907, 2772083139, 3425064135, 1027904838, 2091038070, 788790244, 3301919831, 2161886505, 877302965, 3330988549, 3057893008, 2402872097, 1484302053, 1829557616, 3080408902, 3035928600, 4251009512, 948417911, 3986678836, 1493328493, 4041764233, 1338436932, 3809872738, 1403516887, 3922058373, 918734287, 1554837696, 1774376874, 2874859169, 630633425, 4151609260, 3289424066, 1051118437, 3625339436, 624843231, 284385873, 3378856804, 3729667162, 865852493, 442520327, 2765005851, 2954314875, 3990752574, 58921550, 3599877586, 3113749624, 2900478476, 1413124584, 864828535, 3842231384, 4051990916, 266290022, 334900208, 319362452, 2177768284, 814036757, 3494927725, 4207496308, 1566844823, 3296117191, 1150190105, 717842577, 1346802984, 2534800974, 4176211764, 1775010617, 1033539909, 3038419563, 345199929, 841065278, 3038350062, 464687308, 50985462, 544310231, 3005610152, 1612147898, 400394740, 4235838245, 3943041934, 817660249, 1234415290, 1543815781, 206536920, 3421763072, 3921276177, 2207831084, 505363022, 3172987707, 3503099918, 56059120, 3178587010, 3179395175, 574624096, 1886519735, 674112172, 3676346432, 3839317705, 3578294700, 1290387573, 193204507, 1802935076, 143050951, 331774714, 1381538807, 4098081157, 3271433482, 1593593503, 3603046894, 3614445218, 1724703768, 3258245702, 4204826563, 1433058343, 1809200813, 2031379647, 2106198663, 423618944, 3104610941, 240066813, 3064361208, 3968367773, 3251129825, 2867361835, 1924804390, 3899856999, 2079866328, 3091627534, 359409604, 3472611708, 2190595177, 2746762031, 128153960, 3772555276, 3944491229, 3593283340, 2523045294, 2808188767, 367706354, 57795667, 3377307212, 2082345487, 3607906942, 3502425729, 2565064957, 4261084692)
# 500 inverse state of 0x6422c37e

def find_best_sum(arr):
	l = len(arr)
	l2 = 10**7 // 32

	tot = sum(arr[:l2])
	best = tot

	for i in range(l - l2):
		tot += arr[l2 + i] - arr[i]
		if tot < best:
			best = tot
	return best

import random

r1 = random.Random()
r2 = random.Random()
r1.setstate(tuple((3, tuple(list(st1) + [624]), None)))
r2.setstate(tuple((3, tuple(list(st2) + [624]), None)))

ham1 = []
ham2 = []
for i in range(1000):
    v1 = [r1.getrandbits(32) for _ in range(624)]
    v2 = [r2.getrandbits(32) for _ in range(624)]

    ham1 += [v.bit_count() for v in v1]
    ham2 += [v.bit_count() for v in v2]

print("after-temper 0x80000000:", find_best_sum(ham1))
print("after-temper 0x6422c37e:", find_best_sum(ham2))


r1 = random.Random()
r2 = random.Random()
r1.setstate(tuple((3, tuple(list(st1) + [624]), None)))
r2.setstate(tuple((3, tuple(list(st2) + [624]), None)))

ham1 = []
ham2 = []
for i in range(1000):
    r1.getrandbits(19968)
    r2.getrandbits(19968)

    ham1 += [v.bit_count() for v in r1.getstate()[1][:-1]]
    ham2 += [v.bit_count() for v in r2.getstate()[1][:-1]]

print("before-temper 0x80000000:", find_best_sum(ham1))
print("before-temper 0x6422c37e:", find_best_sum(ham2))
